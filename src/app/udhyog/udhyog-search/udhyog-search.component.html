<div class="album py-3 bg-light mt-5">
    <div class="container">
        <form [formGroup]="udhyogFilterFormGroup">
            <div class="row">
                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                        <mat-label appLocalization="gui_udhyogdarta_udhyog_legal_type"></mat-label>
                        <mat-select formControlName="LegalType">
                            <mat-option *ngFor="let companyLegalType of udhyogLegalTypes" [value]="companyLegalType">
                                {{companyLegalType}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                        <mat-label appLocalization="gui_udhyogdarta_udhyog_category"></mat-label>
                        <mat-select formControlName="CompanyCategory">
                            <mat-option *ngFor="let udhyogCategory of udhyogCategories" [value]="udhyogCategory">
                                {{udhyogCategory}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                        <mat-label appLocalization="gui_udhyogdarta_udhyog_type"></mat-label>
                        <mat-select formControlName="CompanyType" (selectionChange)="getSubtypes()">
                            <mat-option *ngFor="let udhyogType of udhyogTypes" [value]="udhyogType">
                                {{udhyogType}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>

                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                        <mat-label appLocalization="gui_udhyogdarta_udhyog_sub_type"></mat-label>
                        <mat-select formControlName="CompanySubType">
                            <mat-option *ngFor="let udhyogSubType of udhyogSubTypes" [value]="udhyogSubType">
                                {{udhyogSubType}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>

            <mat-accordion>
                <mat-expansion-panel (opened)="panelOpenState = true"
                (closed)="panelOpenState = false">
                  <mat-expansion-panel-header>
                    <mat-panel-title appLocalization="gui_udhyog_search_advanced_filter"></mat-panel-title>
                    <!-- <mat-panel-description appLocalization="gui_udhyog_search_advanced_filter_description"></mat-panel-description> -->
                  </mat-expansion-panel-header>
                  <div class="row">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header" appLocalization="gui_udhyogdarta_darta_miti"></div>
                            <div class="card-body">
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label C></mat-label>
                                        <input matInput formControlName="RegistrationDate_From" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_to"></mat-label>
                                        <input matInput formControlName="RegistrationDate_To" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                
                                <small appLocalization="gui_udhyogdarta_darta_miti_hint_short"></small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header" appLocalization="gui_udhyog_search_renew_date"></div>
                            <div class="card-body">
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_from"></mat-label>
                                        <input matInput formControlName="RegistrationDate_From" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_to"></mat-label>
                                        <input matInput formControlName="RegistrationDate_To" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                
                                <small appLocalization="gui_udhyogdarta_darta_miti_hint_short"></small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header" appLocalization="gui_udhyog_search_asset_increment_date"></div>
                            <div class="card-body">
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_from"></mat-label>
                                        <input matInput formControlName="RegistrationDate_From" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_to"></mat-label>
                                        <input matInput formControlName="RegistrationDate_To" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                
                                <small appLocalization="gui_udhyogdarta_darta_miti_hint_short"></small>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-header" appLocalization="gui_udhyog_search_place_change_date"></div>
                            <div class="card-body">
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_from"></mat-label>
                                        <input matInput formControlName="RegistrationDate_From" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                                <div class="row">
                                    <mat-form-field class="example-full-width">
                                        <mat-label appLocalization="gui_udhyog_search_to"></mat-label>
                                        <input matInput formControlName="RegistrationDate_To" [errorStateMatcher]="matcher">
                                    </mat-form-field>
                                </div>
                
                                <small appLocalization="gui_udhyogdarta_darta_miti_hint_short"></small>
                            </div>
                        </div>
                    </div>
                </div>
                </mat-expansion-panel>
              </mat-accordion>
        </form>
        <div class="d-flex justify-content-center">            
            <button (click)="search()" type="button" class="btn btn-primary mt-3 w-25" appLocalization="gui_udhyog_search_search_button"></button>
        </div>
    </div>

    <div *ngIf="udhyogDataSource" class="mt-5" style="overflow-x: scroll;">
        <table mat-table [dataSource]="udhyogDataSource" matSort class="mat-elevation-z8">

            <!-- <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
                                <th mat-header-cell *matHeaderCellDef> {{column}} </th>
                                <td mat-cell *matCellDef="let element"> {{element[udhyogMapping[column]]}} </td>
                            </ng-container> -->
            <ng-container [matColumnDef]="udhyogMapping.registrationNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.registrationNumber}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.registrationNumber}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.registrationDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.registrationDate}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.registrationDate | date : "yyyy.MM.dd"}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.companyName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.companyName}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.companyName}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.legalType">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.legalType}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.legalType}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.companyCategory">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.companyCategory}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.companyCategory}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.companyType">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.companyType}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.companyType}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.companySubType">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.companySubType}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.companySubType}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.panNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.panNumber}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.panNumber}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.objective">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.objective}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.objective}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.annualProduction">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.annualProduction}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.annualProduction}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.electricalPowerUsage">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.electricalPowerUsage}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.electricalPowerUsage}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.contact">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.contact}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.contact}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.revenue">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.revenue}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.revenue}} </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.companyAddress">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.companyAddress}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.companyAddress.nagarpalikaName}},  j&f {{udhyog.companyAddress.wadaNumber}}
                </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.workersDetail">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.workersDetail}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.workersDetail.maleWorkerNumber + udhyog.workersDetail.femaleWorkerNumber}}
                </td>
            </ng-container>

            <ng-container [matColumnDef]="udhyogMapping.ownersDetail">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{udhyogMapping.ownersDetail}} </th>
                <td mat-cell *matCellDef="let udhyog"> {{udhyog.ownersDetail[0].name}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>